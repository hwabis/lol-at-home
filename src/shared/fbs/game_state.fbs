include "common_types.fbs";
namespace lol_at_home_shared;

struct HealthFB {
  current_health: double;
  max_health: double;
  health_regen_per_sec: double;
}

struct ManaFB {
  mana: double;
  max_mana: double;
  mana_regen_per_sec: double;
}

enum MovementStateFB: ubyte {
  Idle = 0,
  Moving = 1,
}

struct MovableFB {
  speed: double;
  state: MovementStateFB;
  target_pos: PositionFB;
}

struct TeamFB {
  color: TeamColorFB;
}

enum AbilityTagFB: ubyte {
  Garen_Q = 0,
  Garen_W = 1,
  Garen_E = 2,
  Garen_R = 3,
}

struct AbilityFB {
  id: AbilityTagFB;
  cooldown_remaining: float;
  rank: int;
  current_charges: int;
  max_charges: ubyte;
}

table AbilityEntryFB {
  slot: AbilitySlotFB;
  ability: AbilityFB;
}

table AbilitiesFB {
  abilities: [AbilityEntryFB];
}

table EntityFB {
  id: uint;  // entt::entity
  position: PositionFB;
  health: HealthFB;
  mana: ManaFB;
  movable: MovableFB;
  team: TeamFB;
  abilities: AbilitiesFB;
}

table GameStateDeltaFB {
  entities: [EntityFB];
  deleted_entity_ids: [uint];
}

root_type GameStateDeltaFB;
